import"./assets/styles-Ar2ttBcN.js";import{S as v,N as w,A as U,a as f,b as j,i as c,P as N}from"./assets/vendor-BacCqqnA.js";new v(".hero .swiper",{modules:[w,U],slidesPerView:1,spaceBetween:20,autoplay:{delay:3e3,disableOnInteraction:!0},navigation:{nextEl:".right-btn",prevEl:".left-btn"}});const q={header:document.querySelector(".header"),hero:document.querySelector(".hero"),books:document.querySelector(".books"),feedbacks:document.querySelector(".feedbacks"),events:document.querySelector(".events"),footer:document.querySelector(".footer"),registerModal:document.querySelector(".register-modal"),bookModal:document.querySelector(".book-modal")},F="https://books-backend.p.goit.global/books/";f.defaults.baseURL=F;const K=async()=>{const{data:e}=await f("category-list");return e},z=async()=>{const{data:e}=await f("top-books");return e},G=async e=>{const{data:t}=await f("category",{params:{category:e}});return t},Q=async e=>{const{data:t}=await f(e);return t},{registerModal:W,bookModal:O}=q,B=()=>W.classList.remove("is-open"),X=()=>O.classList.add("is-open"),M=()=>O.classList.remove("is-open");new j(".accordion-container",{duration:250,showMultiple:!0,elementClass:"ac",triggerClass:"ac-trigger",panelClass:"ac-panel",activeClass:"is-active"});const Z=document.querySelector(".modal-close-btn"),h=document.querySelector(".count-text"),ee=document.querySelector(".minus-btn"),te=document.querySelector(".plus-btn"),oe=document.querySelector(".add-btn"),se=document.querySelector(".modal-book-form"),ne=document.querySelector(".book-modal");let R="",k=null,u=1;function re(e,t){const o="product",n=localStorage.getItem(o),s=n?JSON.parse(n):[],a=s.find(d=>d._id===e._id);a?a.quantity+=t:s.push({_id:e._id,book_image:e.book_image,title:e.title,author:e.author,price:e.price,quantity:t}),localStorage.setItem(o,JSON.stringify(s))}async function ae(e){try{const t=await Q(e);ce(t),X(),document.body.style.overflow="hidden"}catch{c.error({title:"Error",message:"Could not download book!",position:"topRight"})}}function ce(e){k=e,R=e.title;const t=document.querySelector(".modal-book-image"),o=document.querySelector(".modal-book-title"),n=document.querySelector(".modal-book-text"),s=document.querySelector(".modal-book-price");t.src=e.book_image,t.alt=e.title,o.textContent=e.title,n.textContent=e.author,s.textContent=`$${e.price}`,u=1,h.textContent=u}te.addEventListener("click",()=>{u+=1,h.textContent=u});ee.addEventListener("click",()=>{u>1&&(u-=1,h.textContent=u)});oe.addEventListener("click",()=>{const e=Number(h.textContent);k&&(re(k,e),c.success({message:`Added ${e} of ${R} to basket!`,position:"topRight"}))});se.addEventListener("submit",e=>{e.preventDefault(),location.href="product.html"});ne.addEventListener("click",e=>{e.target===e.currentTarget&&(M(),document.body.style.overflow="unset")});Z.addEventListener("click",()=>{M(),document.body.style.overflow="unset"});document.addEventListener("keydown",e=>{e.key==="Escape"&&(M(),document.body.style.overflow="unset")});const{books:C}=q,l=C.querySelector(".books-list"),A=C.querySelector(".categories-btn"),m=C.querySelector(".categories"),L=()=>!matchMedia("(hover: hover)").matches,g=()=>L()?10:24,ie=document.querySelector(".pagination-number"),p=document.querySelector(".btn.more"),le=document.querySelector(".pagination-all"),I=()=>{p.classList.remove("visually-hidden")},T=()=>{p.classList.add("visually-hidden")},V=e=>{l.innerHTML=e.reduce((t,{_id:o,book_image:n,title:s,price:a,author:d})=>t+=`
    <li>
        <img
            src="${n}"
            alt="${s}"
        />
        <h3><b>${s}</b><span class="price">$${a}</span></h3>
        <p class="author">${d}</p>
        <button class="btn" data-bookid="${o}">Learn More</button>
    </li>`,"")},de=e=>{l.innerHTML+=e.reduce((t,{_id:o,book_image:n,title:s,price:a,author:d})=>t+=`
    <li>
        <img
            src="${n}"
            alt="${s}"
        />
        <h3><b>${s}</b><span class="price">$${a}</span></h3>
        <p class="author">${d}</p>
        <button class="btn" data-bookid="${o}">Learn More</button>
    </li>`,"")},x=(e,t=0)=>e.slice(t*(L()?10:24),(t+1)*(L()?10:24)),$=(e,t)=>{ie.textContent=e.length<t?e.length.toString():t.toString()},_=e=>{le.textContent=e.toString()},H=()=>{l.innerHTML=[0,0,0].reduce((e,t)=>e+=`
    <li>
        <img
            src="noimg.png"
            class="loading"
            alt=""
        />
        <h3><b class="loading">................................................</b><span class="price loading">............</span></h3>
        <p class="author loading">............... ............</p>
        <button class="btn" disabled>Learn More</button>
    </li>`,"")},ue=e=>{for(let t=0;t<15;t++)e.innerHTML+='<li class="loading">........................................................................................</li>'},y=e=>{e.querySelectorAll(".loading").forEach(t=>t.remove())};let r=[],i=0;const Y=async()=>{r=[],i=0,T(),z().then(e=>{y(l),e.forEach(t=>r.push(...t.books)),V(x(r)),i+=1,r.length>g()&&I(),$(r,g()),_(r.length)}).catch(()=>{c.error({message:"Error while getting data from all categories!"})})};document.addEventListener("DOMContentLoaded",async()=>{ue(m),H(),setTimeout(async()=>{K().then(e=>{y(m),m.innerHTML+=e.reduce((t,{list_name:o})=>t+=o?`<li>${o}`:"","")}).catch(()=>{c.error({message:"Error while getting data from categories!"})});try{await Y(),y(l)}catch{c.error({message:"Error while getting books data!"})}},1e3)});A.addEventListener("click",()=>{m.classList.toggle("active")});m.addEventListener("click",async e=>{if(e.target===e.currentTarget||!e.target||e.target.classList.contains("active"))return;m.querySelectorAll("li.active").forEach(o=>o.classList.remove("active")),e.target.classList.add("active");const t=e.target.textContent;if(A.textContent=t,m.classList.remove("active"),H(),T(),e.target.dataset.value==="all"){await Y(),y(l);return}r=[],i=0,G(t).then(o=>{r=o,V(x(o)),i+=1,o.length>g()&&I(),$(o,g()),_(o.length)}).catch(()=>{c.error({message:"Error while getting data from category!"})}).finally(()=>y(l))});p.addEventListener("click",e=>{e.preventDefault(),p.disabled=!0;const t=Math.ceil(r.length/g());i<t?(i+1>=t&&(T(),c.success({position:"bottomRight",message:"This is the last page of books for you :)",color:"#fff"})),$(r,(i+1)*g()),de(x(r,i)),i+=1,p.disabled=!1):c.error({message:"You already loaded all books from that category!"})});l.addEventListener("click",async e=>{e.target.nodeName!="BUTTON"||e.target.classList!="btn"||await ae(e.target.dataset.bookid)});const me=document.querySelector(".feedbacks-swiper");me&&new v(".feedbacks-swiper",{modules:[w,N],slidesPerView:3,spaceBetween:24,pagination:{el:".swiper-pagination",clickable:!0},navigation:{nextEl:".feedbacks-btn-next",prevEl:".feedbacks-btn-prev"},breakpoints:{0:{slidesPerView:1,spaceBetween:24},768:{slidesPerView:2,spaceBetween:24},1440:{slidesPerView:3,spaceBetween:24}}});v.use([w,N]);document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelectorAll(".event-register"),t=document.querySelector(".register-modal");e.forEach(o=>{o.addEventListener("click",n=>{n.preventDefault(),t.classList.add("is-open")})}),t.addEventListener("click",o=>{o.target===o.currentTarget&&t.classList.remove("is-open")})});new v(".events .swiper",{spaceBetween:24,slidesPerView:1,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},pagination:{el:".swiper-pagination",clickable:!0},breakpoints:{768:{slidesPerView:2},1440:{slidesPerView:3}}});const ge=document.querySelector(".form-footer"),pe=document.querySelector(".footer-email-field"),be=document.querySelector(".footer-btn");ge.addEventListener("submit",function(e){e.preventDefault(),c.success({title:"Success",message:"Thank you! You have successfully subscribed to the newsletter.",position:"bottomRight",timeout:3e3,backgroundColor:"#ffffff"}),pe.value="",be.disabled=!0});document.addEventListener("DOMContentLoaded",()=>{setTimeout(()=>{document.querySelectorAll("iframe[data-src]").forEach(e=>e.setAttribute("src",e.dataset.src))},800)});const E=document.querySelector("#scrollToTopBtn");window.addEventListener("scroll",()=>{scrollY>300?E.classList.add("show"):E.classList.remove("show")});E.addEventListener("click",()=>{scrollTo({top:0,behavior:"smooth"})});const P=document.querySelector(".register-form"),ye=document.querySelector(".register-modal-close"),J="RegisterInfo";ye.addEventListener("click",B);q.registerModal.addEventListener("click",e=>{e.target===e.currentTarget&&B()});document.addEventListener("keydown",e=>{e.key==="Escape"&&B()});const b={name:"",email:"",message:""},D=localStorage.getItem(J);if(D){const e=JSON.parse(D);Object.keys(b).forEach(t=>{b[t]=e[t]||"",P.elements[t].value=b[t]})}P.addEventListener("submit",fe);function fe(e){e.preventDefault();const{name:t,email:o}=e.target.elements,n=t.nextElementSibling,s=o.nextElementSibling;let a=!1;t.value.trim()===""?(t.classList.add("error"),n.style.display="block",a=!0):(t.classList.remove("error"),n.style.display="none"),o.value.trim()===""?(o.classList.add("error"),s.style.display="block",a=!0):(o.classList.remove("error"),s.style.display="none"),a||(Object.keys(b).forEach(d=>{b[d]=""}),localStorage.removeItem(J),P.reset(),c.success({title:"Registration",message:"You were successfully registered! Thank you.",position:"bottomRight",color:"#fff"}))}const ve=document.querySelector(".menu"),he=document.querySelector(".burger-btn"),S=document.querySelector(".menu-overlay");he.addEventListener("click",()=>S.classList.add("is-open"));ve.addEventListener("click",e=>{e.preventDefault();let t=e.target;(t.nodeName==="use"||t.nodeName==="svg")&&(t=t.closest(".menu-close-btn")),t.classList.contains("menu-close-btn")&&S.classList.remove("is-open"),t.classList.contains("menu-nav-link")&&(S.classList.remove("is-open"),document.querySelector(t.getAttribute("href")).scrollIntoView({behavior:"smooth"}))});
//# sourceMappingURL=index.js.map
