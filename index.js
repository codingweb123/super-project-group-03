import"./assets/styles-Dh6NVjC3.js";import{S as f,N as S,A as z,a as p,b as J,i as c,P as D}from"./assets/vendor-BacCqqnA.js";new f(".hero .swiper",{modules:[S,z],slidesPerView:1,spaceBetween:20,autoplay:{delay:3e3,disableOnInteraction:!0},navigation:{nextEl:".right-btn",prevEl:".left-btn"}});const w={header:document.querySelector(".header"),hero:document.querySelector(".hero"),books:document.querySelector(".books"),feedbacks:document.querySelector(".feedbacks"),events:document.querySelector(".events"),footer:document.querySelector(".footer"),registerModal:document.querySelector(".register-modal"),bookModal:document.querySelector(".book-modal")},U="https://books-backend.p.goit.global/books/";p.defaults.baseURL=U;const j=async()=>{const{data:e}=await p("category-list");return e},F=async()=>{const{data:e}=await p("top-books");return e},G=async e=>{const{data:t}=await p("category",{params:{category:e}});return t},K=async e=>{const{data:t}=await p(e);return t},{registerModal:Q,bookModal:O}=w,q=()=>Q.classList.remove("is-open"),W=()=>O.classList.add("is-open"),B=()=>O.classList.remove("is-open");new J(".accordion-container",{duration:250,showMultiple:!0,elementClass:"ac",triggerClass:"ac-trigger",panelClass:"ac-panel",activeClass:"is-active"});const X=document.querySelector(".modal-close-btn"),v=document.querySelector(".count-text"),Z=document.querySelector(".minus-btn"),ee=document.querySelector(".plus-btn"),te=document.querySelector(".add-btn"),oe=document.querySelector(".modal-book-form"),se=document.querySelector(".book-modal");let R="",h=null,d=1;function ne(e,t){const o="product",n=localStorage.getItem(o),s=n?JSON.parse(n):[],a=s.find(l=>l._id===e._id);a?a.quantity+=t:s.push({_id:e._id,book_image:e.book_image,title:e.title,author:e.author,price:e.price,quantity:t}),localStorage.setItem(o,JSON.stringify(s))}async function re(e){try{const t=await K(e);ae(t),W(),document.body.style.overflow="hidden"}catch{c.error({title:"Error",message:"Could not download book!",position:"topRight"})}}function ae(e){h=e,R=e.title;const t=document.querySelector(".modal-book-image"),o=document.querySelector(".modal-book-title"),n=document.querySelector(".modal-book-text"),s=document.querySelector(".modal-book-price");t.src=e.book_image,t.alt=e.title,o.textContent=e.title,n.textContent=e.author,s.textContent=`$${e.price}`,d=1,v.textContent=d}ee.addEventListener("click",()=>{d+=1,v.textContent=d});Z.addEventListener("click",()=>{d>1&&(d-=1,v.textContent=d)});te.addEventListener("click",()=>{const e=Number(v.textContent);h&&(ne(h,e),c.success({message:`Added ${e} of ${R} to basket!`,position:"topRight"}))});oe.addEventListener("submit",e=>{e.preventDefault(),location.href="product.html"});se.addEventListener("click",e=>{e.target===e.currentTarget&&(B(),document.body.style.overflow="unset")});X.addEventListener("click",()=>{B(),document.body.style.overflow="unset"});document.addEventListener("keydown",e=>{e.key==="Escape"&&(B(),document.body.style.overflow="unset")});const{books:M}=w,g=M.querySelector(".books-list"),N=M.querySelector(".categories-btn"),u=M.querySelector(".categories"),k=()=>!matchMedia("(hover: hover)").matches,m=()=>k()?10:24,ce=document.querySelector(".pagination-number"),y=document.querySelector(".btn.more"),ie=document.querySelector(".pagination-all"),I=()=>{y.classList.remove("visually-hidden")},C=()=>{y.classList.add("visually-hidden")},V=e=>{g.innerHTML=e.reduce((t,{_id:o,book_image:n,title:s,price:a,author:l})=>t+=`
    <li>
        <img
            src="${n}"
			loading="lazy"
            alt="${s}"
        />
        <h3><b>${s}</b><span class="price">$${a}</span></h3>
        <p class="author">${l}</p>
        <button class="btn" data-bookid="${o}">Learn More</button>
    </li>`,"")},le=e=>{g.innerHTML+=e.reduce((t,{_id:o,book_image:n,title:s,price:a,author:l})=>t+=`
    <li>
        <img
            src="${n}"
			loading="lazy"
            alt="${s}"
        />
        <h3><b>${s}</b><span class="price">$${a}</span></h3>
        <p class="author">${l}</p>
        <button class="btn" data-bookid="${o}">Learn More</button>
    </li>`,"")},T=(e,t=0)=>e.slice(t*(k()?10:24),(t+1)*(k()?10:24)),x=(e,t)=>{ce.textContent=e.length<t?e.length.toString():t.toString()},_=e=>{ie.textContent=e.toString()},de=()=>{g.innerHTML=[0,0,0].reduce((e,t)=>e+=`
    <li>
        <img
		    src="data:image/gif;base64,R0lGODlhAQABAAAAACw="
            class="loading"
            alt=""
        />
        <h3><b class="loading">................................................</b><span class="price loading">............</span></h3>
        <p class="author loading">............... ............</p>
        <button class="btn" disabled>Learn More</button>
    </li>`,"")},ue=e=>{for(let t=0;t<15;t++)e.innerHTML+='<li class="loading">........................................................................................</li>'},A=e=>{e.querySelectorAll(".loading").forEach(t=>t.remove())};let r=[],i=0;const H=async()=>{r=[],i=0,C(),F().then(e=>{A(g),e.forEach(t=>r.push(...t.books)),V(T(r)),i+=1,r.length>m()&&I(),x(r,m()),_(r.length)}).catch(()=>{c.error({message:"Error while getting data from all categories!"})})};document.addEventListener("DOMContentLoaded",async()=>{ue(u),setTimeout(async()=>{j().then(e=>{A(u),u.innerHTML+=e.reduce((t,{list_name:o})=>t+=o?`<li>${o}`:"","")}).catch(()=>{c.error({message:"Error while getting data from categories!"})});try{await H()}catch{c.error({message:"Error while getting books data!"})}},1e3)});N.addEventListener("click",()=>{u.classList.toggle("active")});u.addEventListener("click",async e=>{if(e.target===e.currentTarget||!e.target||e.target.classList.contains("active"))return;u.querySelectorAll("li.active").forEach(o=>o.classList.remove("active")),e.target.classList.add("active");const t=e.target.textContent;if(N.textContent=t,u.classList.remove("active"),de(),C(),e.target.dataset.value==="all"){await H();return}r=[],i=0,G(t).then(o=>{r=o,V(T(o)),i+=1,o.length>m()&&I(),x(o,m()),_(o.length)}).catch(()=>{c.error({message:"Error while getting data from category!"})}).finally(()=>A(g))});y.addEventListener("click",e=>{e.preventDefault(),y.disabled=!0;const t=Math.ceil(r.length/m());i<t?(i+1>=t&&(C(),c.success({position:"bottomRight",message:"This is the last page of books for you :)",color:"#fff"})),x(r,(i+1)*m()),le(T(r,i)),i+=1,y.disabled=!1):c.error({message:"You already loaded all books from that category!"})});g.addEventListener("click",async e=>{e.target.nodeName!="BUTTON"||e.target.classList!="btn"||await re(e.target.dataset.bookid)});const me=document.querySelector(".feedbacks-swiper");me&&new f(".feedbacks-swiper",{modules:[S,D],slidesPerView:3,spaceBetween:24,pagination:{el:".swiper-pagination",clickable:!0},navigation:{nextEl:".feedbacks-btn-next",prevEl:".feedbacks-btn-prev"},breakpoints:{0:{slidesPerView:1,spaceBetween:24},768:{slidesPerView:2,spaceBetween:24},1440:{slidesPerView:3,spaceBetween:24}}});f.use([S,D]);document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelectorAll(".event-register"),t=document.querySelector(".register-modal");e.forEach(o=>{o.addEventListener("click",n=>{n.preventDefault(),t.classList.add("is-open")})}),t.addEventListener("click",o=>{o.target===o.currentTarget&&t.classList.remove("is-open")})});new f(".events .swiper",{spaceBetween:24,slidesPerView:1,navigation:{nextEl:".events-button-next",prevEl:".events-button-prev"},pagination:{el:".pagination",clickable:!0},breakpoints:{768:{slidesPerView:2},1440:{slidesPerView:3}}});const ge=document.querySelector(".form-footer"),ye=document.querySelector(".footer-email-field"),be=document.querySelector(".footer-btn");ge.addEventListener("submit",function(e){e.preventDefault(),c.success({title:"Success",message:"Thank you! You have successfully subscribed to the newsletter.",position:"bottomRight",timeout:3e3,backgroundColor:"#ffffff"}),ye.value="",be.disabled=!0});document.addEventListener("DOMContentLoaded",()=>{setTimeout(()=>{document.querySelectorAll("iframe[data-src]").forEach(e=>e.setAttribute("src",e.dataset.src))},800)});const L=document.querySelector("#scrollToTopBtn");window.addEventListener("scroll",()=>{scrollY>300?L.classList.add("show"):L.classList.remove("show")});L.addEventListener("click",()=>{scrollTo({top:0,behavior:"smooth"})});const $=document.querySelector(".register-form"),pe=document.querySelector(".register-modal-close"),Y="RegisterInfo";pe.addEventListener("click",q);w.registerModal.addEventListener("click",e=>{e.target===e.currentTarget&&q()});document.addEventListener("keydown",e=>{e.key==="Escape"&&q()});const b={name:"",email:"",message:""},P=localStorage.getItem(Y);if(P){const e=JSON.parse(P);Object.keys(b).forEach(t=>{b[t]=e[t]||"",$.elements[t].value=b[t]})}$.addEventListener("submit",fe);function fe(e){e.preventDefault();const{name:t,email:o}=e.target.elements,n=t.nextElementSibling,s=o.nextElementSibling;let a=!1;t.value.trim()===""?(t.classList.add("error"),n.style.display="block",a=!0):(t.classList.remove("error"),n.style.display="none"),o.value.trim()===""?(o.classList.add("error"),s.style.display="block",a=!0):(o.classList.remove("error"),s.style.display="none"),a||(Object.keys(b).forEach(l=>{b[l]=""}),localStorage.removeItem(Y),$.reset(),c.success({title:"Registration",message:"You were successfully registered! Thank you.",position:"bottomRight",color:"#fff"}))}const ve=document.querySelector(".menu"),he=document.querySelector(".burger-btn"),E=document.querySelector(".menu-overlay");he.addEventListener("click",()=>E.classList.add("is-open"));ve.addEventListener("click",e=>{e.preventDefault();let t=e.target;(t.nodeName==="use"||t.nodeName==="svg")&&(t=t.closest(".menu-close-btn")),t.classList.contains("menu-close-btn")&&E.classList.remove("is-open"),t.classList.contains("menu-nav-link")&&(E.classList.remove("is-open"),document.querySelector(t.getAttribute("href")).scrollIntoView({behavior:"smooth"}))});
//# sourceMappingURL=index.js.map
